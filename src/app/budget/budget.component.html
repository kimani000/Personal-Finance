<div class="card mt-1 text-white">

    <!-- header for income page-->
    <div class="row text-center">
        <p class="mt-4 mb-0 pb-0" style="font-size: 3.5em;"><em>Log your income, budget, and spending!</em></p><br>
        <p class="my-0 pb-0" style="font-size:x-large"><em>“Beware of little expenses; a small leak will sink a great
                ship.”
                — Benjamin Franklin</em>
        </p>
    </div>

    <!-- flex row containing income information -->
    <div id="flexRowsBudget" class="d-flex flex-row">

        <!-- Left column-->
        <div class="col-md-8 pt-3">
            <div class="row h-auto w-100">
                <h2 class="display-5 text-center border-bottom">Incomes</h2>
            </div>
            <div class="d-flex justify-content-center" *ngIf="doughnutChartLabels">

                <canvas id="charts" baseChart [labels]="doughnutChartLabels" [data]="doughnutChartData"
                    [options]="doughnutChartOptions" [legend]="true" [type]="'doughnut'">
                </canvas>

            </div>

            <div class="row float-end add-accordion-btn-row">
                <button id="btnAddNew" (click)="addIncome('modal-2')" class="btn btn-primary rounded">
                    <span id="addNewIcon" class="fa-solid fa-plus float-start"></span>Add
                </button>
            </div>
        </div>

        <!-- Right column-->
        <div class="col-md-4 text-center pt-4 my-auto pt-2">
            <p class="display-5 border-bottom">{{defaultTotalIncomeTitle}}</p>
            <p class="display-5">{{totalIncome | currency: 'USD'}}</p>
        </div>
    </div>

    <!-- flex row containing expense information -->
    <div id="flexRowsBudget" class="d-flex flex-row">

        <!-- Left column-->
        <div class="col-md-8 pt-3">
            <div class="row h-auto w-100">
                <h2 class="display-5 text-center border-bottom">Expenses</h2>
            </div>

            <!-- Expense by category Buttons-->
            <div id="displayContainer" class="row" *ngIf="expenses">
                <p class="text-white mb-0 pb-0">*By Category:</p>

                <button id="expensesBtn" *ngFor="let c of expenseCategoryArr; let i = index"
                    class="btn btn-primary m-2 text-start rounded"
                    (click)="displaySpendingInCategory(c)">
                    {{c}}
                    <span class="fa-solid fa-chevron-right text-white float-end pt-1"></span>
                </button>

            </div>
            <!-- Change this to addExpense() modal function-->
            <div class="row float-end add-btn-row">
                <button id="btnAddNew" (click)="addIncome('modal-2')" class="btn btn-primary rounded">
                    <span id="addNewIcon" class="fa-solid fa-plus float-start"></span>Add
                </button>
            </div>
        </div>

        <!-- Right column-->
        <div id="expenseDetailCol" class="col-md-4 text-center pt-4 my-auto pt-2">

            <!-- If category button IS NOT clicked-->
            <div *ngIf="!expenseCategoryIsSelected && !expenseIsSelected;" style="height: inherit; padding-top: 150px!important">
                <p class="display-5 border-bottom">{{defaultTotalExpenseTitle}}</p>
                <p class="display-5">{{totalExpense | currency: 'USD'}}</p>
            </div>

            <!-- If category button IS clicked-->
            <div *ngIf="expenseCategoryIsSelected" id="spendingByCategorDiv" style="padding-top: 35px!important; padding-bottom: 35px !important; overflow-y: scroll !important;;">
                <p class="text-white text-start mb-0 pb-0e">*By Location:</p>

                <button id="expensesBtn" *ngFor="let e of expenseArrByCategory; let i = index"
                    class="btn btn-primary m-2 text-start rounded" (click)="displayExpenseDetail(e)">
                    {{e.location}}
                    <span class="fa-solid fa-chevron-down text-white float-end pt-1"></span>
                </button>
            </div>
            
            <!-- Nested component for expense detail-->
            <pf-expense-detail *ngIf="expenseIsSelected" [selectedExpense]="selectedExpense" #expenseDetail
            style="padding-top: auto!important;" @fade
            (expenseDetailEvent)="closeExpenseDetail($event)"></pf-expense-detail>

        </div>
    </div>
</div>

<pf-budget-modal id="modal-2" (newIncomeEvent)="addNewIncome($event)"></pf-budget-modal>